var Te=Object.defineProperty;var Se=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var v=(e,t,n)=>(Se(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function M(){}function _e(e,t){for(const n in t)e[n]=t[n];return e}function Me(e){return e()}function ye(){return Object.create(null)}function D(e){e.forEach(Me)}function Pe(e){return typeof e=="function"}function K(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Le(e){return Object.keys(e).length===0}function y(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function Re(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function Y(e){return document.createTextNode(e)}function L(){return Y(" ")}function O(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ne(e){return Array.from(e.childNodes)}function le(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ce(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}let G;function F(e){G=e}function $e(){if(!G)throw new Error("Function called outside component initialization");return G}function He(e){$e().$$.on_mount.push(e)}function oe(){const e=$e();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Ce(t,n,{cancelable:r});return i.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}const C=[],ge=[];let H=[];const pe=[],Ie=Promise.resolve();let ue=!1;function Oe(){ue||(ue=!0,Ie.then(Ye))}function ae(e){H.push(e)}const ce=new Set;let N=0;function Ye(){if(N!==0)return;const e=G;do{try{for(;N<C.length;){const t=C[N];N++,F(t),De(t.$$)}}catch(t){throw C.length=0,N=0,t}for(F(null),C.length=0,N=0;ge.length;)ge.pop()();for(let t=0;t<H.length;t+=1){const n=H[t];ce.has(n)||(ce.add(n),n())}H.length=0}while(C.length);for(;pe.length;)pe.pop()();ue=!1,ce.clear(),F(e)}function De(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ae)}}function Be(e){const t=[],n=[];H.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),H=t}const re=new Set;let We;function j(e,t){e&&e.i&&(re.delete(e),e.i(t))}function Z(e,t,n,r){if(e&&e.o){if(re.has(e))return;re.add(e),We.c.push(()=>{re.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function ve(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],l=t[o];if(l){for(const u in s)u in l||(r[u]=1);for(const u in l)i[u]||(n[u]=l[u],i[u]=1);e[o]=l}else for(const u in s)i[u]=1}for(const s in r)s in n||(n[s]=void 0);return n}function be(e){return typeof e=="object"&&e!==null?e:{}}function ee(e){e&&e.c()}function U(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||ae(()=>{const s=e.$$.on_mount.map(Me).filter(Pe);e.$$.on_destroy?e.$$.on_destroy.push(...s):D(s),e.$$.on_mount=[]}),o.forEach(ae)}function x(e,t){const n=e.$$;n.fragment!==null&&(Be(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function je(e,t){e.$$.dirty[0]===-1&&(C.push(e),Oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V(e,t,n,r,i,o,s,l=[-1]){const u=G;F(e);const c=e.$$={fragment:null,ctx:[],props:o,update:M,not_equal:i,bound:ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:ye(),dirty:l,skip_bound:!1,root:t.target||u.$$.root};s&&s(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},(h,p,...A)=>{const f=A.length?A[0]:p;return c.ctx&&i(c.ctx[h],c.ctx[h]=f)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](f),d&&je(e,h)),p}):[],c.update(),d=!0,D(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const h=Ne(t.target);c.fragment&&c.fragment.l(h),h.forEach(w)}else c.fragment&&c.fragment.c();t.intro&&j(e.$$.fragment),U(e,t.target,t.anchor,t.customElement),Ye()}F(u)}class z{$destroy(){x(this,1),this.$destroy=M}$on(t,n){if(!Pe(n))return M;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Le(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ue(e,t){const n=ie(e,t);if(n!==-1)return n;const r=[];for(let o=0;o<e.length;o++)e[o]===_.EMPTY&&r.push(o);const i=Math.floor(Math.random()*r.length);return r[i]}function xe(e,t){const n=R(e),r=new Map;for(const o of n){const s=[...e];s[o]=t,r.set(o,fe(s,I(t),t,!1)),s[o]=_.EMPTY}let i=[-1,-1/0];for(const o of r)o[1]>i[1]&&(i=o);return i[0]}function fe(e,t,n,r){const i=R(e),o=de(e);if(o===n)return 1;if(o===I(n))return-1;if(i.length===0)return 0;let s=r?-1/0:1/0;for(const l of i){if(e[l]=t,r){const u=fe(e,I(t),n,!1);s=Math.max(s,u)}else{const u=fe(e,I(t),n,!0);s=Math.min(s,u)}e[l]=_.EMPTY}return s}function Fe(e,t){const n=t===_.PLAYER1?_.PLAYER2:_.PLAYER1,r=ie(e,n),i=ie(e,t);if(R(e).length===0)return-1;if(i!==-1)return e[i]=t,i;if(r!==-1)return e[r]=t,r;if(e[4]===_.EMPTY)return e[4]=t,4;{const s=R(e);let l=se(s.length);for(;e[l]!==_.EMPTY;)l=se(s.length);return e[l]=t,l}}function qe(e,t){const n=t===_.PLAYER1?_.PLAYER2:_.PLAYER1,r=ie(e,n);if(R(e).length===0)return-1;if(r!==-1)return e[r]=t,r;{const o=R(e);let s=se(o.length);for(;e[s]!==_.EMPTY;)s=se(o.length);return e[s]=t,s}}function te(e){switch(e){case b.EASY:return Ue;case b.PETTY:return qe;case b.MEDIUM:return Fe;case b.HARD:return xe;case b.HUMAN:case b.ONLINE:return;default:return}}function ie(e,t){for(let n=0;n<e.length;n++)if(e[n]===_.EMPTY){if(e[n]=t,de(e)===t)return n;e[n]=_.EMPTY}return-1}function se(e){return Math.floor(Math.random()*e)}var b=(e=>(e[e.EASY=0]="EASY",e[e.PETTY=1]="PETTY",e[e.MEDIUM=2]="MEDIUM",e[e.HARD=3]="HARD",e[e.HUMAN=4]="HUMAN",e[e.ONLINE=5]="ONLINE",e))(b||{}),_=(e=>(e[e.EMPTY=0]="EMPTY",e[e.PLAYER1=1]="PLAYER1",e[e.PLAYER2=2]="PLAYER2",e))(_||{});class ke{constructor(t){v(this,"score",0);v(this,"field");v(this,"botMove");this.field=t}addWin(){this.score++}isHuman(){return this.botMove===void 0}move(t){return this.botMove!==void 0?this.botMove(t,this.field):-1}}class Ge{constructor(t=new ke(1),n=new ke(2),r=0){v(this,"player");v(this,"enemy");v(this,"mode");t.score=0,n.score=0,this.mode=r,this.player=t,this.enemy=n,this.enemy.botMove=te(this.mode)}addWin(t){switch(t){case 1:this.player.addWin();break;case 2:this.enemy.addWin();break}}switchSides(){const t=this.player.botMove;this.player.botMove=this.enemy.botMove,this.enemy.botMove=t;const n=this.player.score;this.player.score=this.enemy.score,this.enemy.score=n}updateMode(t){if(this.mode=t,this.player.isHuman()&&this.enemy.isHuman()&&t!==4){this.enemy.botMove=te(this.mode);return}this.player.isHuman()||(this.player.botMove=te(this.mode)),this.enemy.isHuman()||(this.enemy.botMove=te(this.mode))}}class Ee{constructor(t){v(this,"finished");v(this,"winner",0);this.winner=de(t),this.finished=Ke(t)||this.winner!==0}isDraw(){return this.finished&&this.winner===0}}function Ke(e){return!e.some(t=>t===0)}function de(e){const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<t.length;n++){const[r,i,o]=t[n];if(e[r]!==0&&e[r]===e[i]&&e[r]===e[o])return e[r]}return 0}function ne(){const e=new Array(9);return e.fill(0),e}function R(e){return e.map((t,n)=>t!==0?-1:n).filter(t=>t>=0)}function I(e){return Ve(e)?3-e:0}function Ve(e){return e===1||e===2}function we(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function Ae(e){let t,n=e[1](e[11])+"",r,i,o,s;function l(){return e[5](e[13])}function u(){return e[6](e[13])}return{c(){t=g("div"),r=Y(n),i=L(),m(t,"class","field svelte-1sape3k"),m(t,"id",e[13].toString())},m(c,d){P(c,t,d),y(t,r),y(t,i),o||(s=[O(t,"click",l),O(t,"keydown",u)],o=!0)},p(c,d){e=c,d&3&&n!==(n=e[1](e[11])+"")&&le(r,n)},d(c){c&&w(t),o=!1,D(s)}}}function ze(e){let t,n=e[0],r=[];for(let i=0;i<n.length;i+=1)r[i]=Ae(we(e,n,i));return{c(){t=g("div");for(let i=0;i<r.length;i+=1)r[i].c();m(t,"id","grid"),m(t,"class","svelte-1sape3k")},m(i,o){P(i,t,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(t,null)},p(i,[o]){if(o&7){n=i[0];let s;for(s=0;s<n.length;s+=1){const l=we(i,n,s);r[s]?r[s].p(l,o):(r[s]=Ae(l),r[s].c(),r[s].m(t,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:M,o:M,d(i){i&&w(t),Re(r,i)}}}function Je(e,t,n){let{board:r}=t,{fieldToString:i}=t,{player:o}=t,{enemy:s}=t,l=_.PLAYER1|_.PLAYER2;l=_.PLAYER1;const u=oe();function c(){return l===o.field?o:s}function d(f){h(f,c().field)&&(l=I(l),c().isHuman()||(h(c().move(r),c().field),l=I(l)))}function h(f,a){return r[f]!==_.EMPTY||new Ee(r).finished?!1:(n(0,r[f]=a,r),n(0,r),!0)}const p=f=>d(f),A=f=>d(f);return e.$$set=f=>{"board"in f&&n(0,r=f.board),"fieldToString"in f&&n(1,i=f.fieldToString),"player"in f&&n(3,o=f.player),"enemy"in f&&n(4,s=f.enemy)},e.$$.update=()=>{if(e.$$.dirty&1){let f=new Ee(r);f.finished&&u("finished",f)}e.$$.dirty&1&&R(r).length===9&&(l=_.PLAYER1,c().isHuman()||(h(c().move(r),c().field),l=_.PLAYER2))},[r,i,d,o,s,p,A]}class Qe extends z{constructor(t){super(),V(this,t,Je,ze,K,{board:0,fieldToString:1,player:3,enemy:4})}}function Xe(e){let t;return{c(){t=Y("🤖")},m(n,r){P(n,t,r)},d(n){n&&w(t)}}}function Ze(e){let t;return{c(){t=Y("👨‍💻")},m(n,r){P(n,t,r)},d(n){n&&w(t)}}}function et(e){let t;return{c(){t=Y("🤖")},m(n,r){P(n,t,r)},d(n){n&&w(t)}}}function tt(e){let t;return{c(){t=Y("👨‍💻")},m(n,r){P(n,t,r)},d(n){n&&w(t)}}}function nt(e){let t,n,r,i,o,s=e[0].score+"",l,u,c,d,h,p=e[1].score+"",A,f,a,k,B,J;function he(E,$){return $&1&&(i=null),i==null&&(i=!!E[0].isHuman()),i?Ze:Xe}let Q=he(e,-1),T=Q(e);function me(E,$){return $&2&&(k=null),k==null&&(k=!!E[1].isHuman()),k?tt:et}let X=me(e,-1),S=X(e);return{c(){t=g("div"),n=g("div"),r=g("i"),T.c(),o=L(),l=Y(s),u=L(),c=g("div"),c.textContent="🆚",d=L(),h=g("div"),A=Y(p),f=L(),a=g("i"),S.c(),m(r,"class","svelte-1gwglwo"),m(n,"id","player1"),m(n,"class","player svelte-1gwglwo"),m(c,"id","versus"),m(c,"class","svelte-1gwglwo"),m(a,"class","svelte-1gwglwo"),m(h,"id","player2"),m(h,"class","player svelte-1gwglwo"),m(t,"id","scoreboard"),m(t,"class","svelte-1gwglwo")},m(E,$){P(E,t,$),y(t,n),y(n,r),T.m(r,null),y(n,o),y(n,l),y(t,u),y(t,c),y(t,d),y(t,h),y(h,A),y(h,f),y(h,a),S.m(a,null),B||(J=[O(c,"click",e[3]),O(c,"keydown",e[4])],B=!0)},p(E,[$]){Q!==(Q=he(E,$))&&(T.d(1),T=Q(E),T&&(T.c(),T.m(r,null))),$&1&&s!==(s=E[0].score+"")&&le(l,s),$&2&&p!==(p=E[1].score+"")&&le(A,p),X!==(X=me(E,$))&&(S.d(1),S=X(E),S&&(S.c(),S.m(a,null)))},i:M,o:M,d(E){E&&w(t),T.d(),S.d(),B=!1,D(J)}}}function rt(e,t,n){let{player:r}=t,{enemy:i}=t,o=oe();function s(){o("switch")}const l=()=>s(),u=()=>s();return e.$$set=c=>{"player"in c&&n(0,r=c.player),"enemy"in c&&n(1,i=c.enemy)},[r,i,s,l,u]}class it extends z{constructor(t){super(),V(this,t,rt,nt,K,{player:0,enemy:1})}}function st(e){let t,n,r,i,o,s,l,u,c,d;return{c(){t=g("nav"),n=g("select"),r=g("option"),r.textContent="🤖",i=g("option"),i.textContent="🤖➕",o=g("option"),o.textContent="🤖❗",s=g("option"),s.textContent="❗🤖❗",l=g("option"),l.textContent="👨‍💻",u=g("option"),u.textContent="👨‍💻 / 👨‍💻",r.__value="easy",r.value=r.__value,m(r,"class","svelte-17bkcmu"),i.__value="petty",i.value=i.__value,m(i,"class","svelte-17bkcmu"),o.__value="medium",o.value=o.__value,m(o,"class","svelte-17bkcmu"),s.__value="hard",s.value=s.__value,m(s,"class","svelte-17bkcmu"),l.__value="human",l.value=l.__value,m(l,"class","svelte-17bkcmu"),u.__value="online",u.value=u.__value,u.disabled=!0,m(u,"class","svelte-17bkcmu"),m(n,"id","mode"),m(n,"class","svelte-17bkcmu"),m(t,"class","svelte-17bkcmu")},m(h,p){P(h,t,p),y(t,n),y(n,r),y(n,i),y(n,o),y(n,s),y(n,l),y(n,u),c||(d=O(n,"change",e[0]),c=!0)},p:M,i:M,o:M,d(h){h&&w(t),c=!1,d()}}}function ot(e){const t=oe();function n(r){let i=r.target.value,o=b.EASY;switch(i){case"easy":o=b.EASY;break;case"petty":o=b.PETTY;break;case"medium":o=b.MEDIUM;break;case"hard":o=b.HARD;break;case"human":o=b.HUMAN;break;case"online":o=b.ONLINE;break;default:o=b.EASY;break}t("change",o)}return[n]}class ct extends z{constructor(t){super(),V(this,t,ot,st,K,{})}}class W{constructor({primary:t,secondary:n,primaryAccent:r,secondaryAccent:i,background:o,name:s}){v(this,"primary");v(this,"secondary");v(this,"primaryAccent");v(this,"secondaryAccent");v(this,"background");v(this,"name");this.primary=t,this.secondary=n,this.primaryAccent=r,this.secondaryAccent=i,this.background=o,this.name=s}CSS(){return`--primary: ${this.primary}; --secondary: ${this.secondary}; --primaryAccent: ${this.primaryAccent}; --secondaryAccent: ${this.secondaryAccent}; --background: ${this.background}`}}const q=[new W({primary:"#1e1f26",secondary:"#bdc3c7",primaryAccent:"#3498db",secondaryAccent:"#2980b9",background:"#2c3e50",name:"Midnight blue"}),new W({primary:"#ffd700",secondary:"#616161",primaryAccent:"#8c7853",secondaryAccent:"#c5cae9",background:"#121212",name:"Black and gold"}),new W({primary:"#4e9a06",secondary:"#f7e267",primaryAccent:"#edd400",secondaryAccent:"#ce5c00",background:"#1b1b1b",name:"Dark green"}),new W({primary:"#8e24aa",secondary:"#ffd54f",primaryAccent:"#ffb300",secondaryAccent:"#e65100",background:"#121212",name:"Vibrant purple"}),new W({primary:"#008080",secondary:"#ffe0b2",primaryAccent:"#ffab91",secondaryAccent:"#4a148c",background:"#232323",name:"Teal blue"})];function lt(e){let t,n,r,i,o;return{c(){t=g("button"),n=Y("🎨"),m(t,"title",r=q[e[0]].name),m(t,"class","svelte-tojmix")},m(s,l){P(s,t,l),y(t,n),i||(o=O(t,"click",e[2]),i=!0)},p(s,[l]){l&1&&r!==(r=q[s[0]].name)&&m(t,"title",r)},i:M,o:M,d(s){s&&w(t),i=!1,o()}}}function ut(e,t,n){const r=oe();let i=0;He(()=>{r("changed",q[i])});function o(){n(0,i=(i+1)%q.length),r("changed",q[i])}return[i,o,()=>o()]}class at extends z{constructor(t){super(),V(this,t,ut,lt,K,{})}}function ft(e){let t,n,r,i,o,s,l,u,c,d;n=new ct({}),n.$on("change",e[5]);const h=[e[1]];let p={};for(let a=0;a<h.length;a+=1)p=_e(p,h[a]);i=new it({props:p}),i.$on("switch",e[6]),s=new at({}),s.$on("changed",mt);const A=[{board:e[0]},{fieldToString:e[2]},e[1]];let f={};for(let a=0;a<A.length;a+=1)f=_e(f,A[a]);return c=new Qe({props:f}),c.$on("finished",e[3]),{c(){t=g("header"),ee(n.$$.fragment),r=L(),ee(i.$$.fragment),o=L(),ee(s.$$.fragment),l=L(),u=g("main"),ee(c.$$.fragment),m(t,"class","svelte-3o9bc2"),m(u,"class","svelte-3o9bc2")},m(a,k){P(a,t,k),U(n,t,null),y(t,r),U(i,t,null),y(t,o),U(s,t,null),P(a,l,k),P(a,u,k),U(c,u,null),d=!0},p(a,[k]){const B=k&2?ve(h,[be(a[1])]):{};i.$set(B);const J=k&7?ve(A,[k&1&&{board:a[0]},k&4&&{fieldToString:a[2]},k&2&&be(a[1])]):{};c.$set(J)},i(a){d||(j(n.$$.fragment,a),j(i.$$.fragment,a),j(s.$$.fragment,a),j(c.$$.fragment,a),d=!0)},o(a){Z(n.$$.fragment,a),Z(i.$$.fragment,a),Z(s.$$.fragment,a),Z(c.$$.fragment,a),d=!1},d(a){a&&w(t),x(n),x(i),x(s),a&&w(l),a&&w(u),x(c)}}}const dt="❌",ht="⭕";function mt({detail:e}){let t=Object.entries(e);for(let n of t)typeof n[1]=="string"&&document.documentElement.style.setProperty(`--${n[0]}`,`${n[1]}`)}function _t(e,t,n){let r=ne(),i=new Ge,o=d=>{switch(d){case _.EMPTY:return"";case _.PLAYER1:return dt;case _.PLAYER2:return ht}};function s(d){d.detail.isDraw()||(i.addWin(d.detail.winner),n(1,i)),setTimeout(()=>n(0,r=ne()),1e3)}function l(){n(0,r=ne()),i.switchSides(),n(1,i)}function u({detail:d}){i.updateMode(d),n(1,i),n(0,r=ne())}return[r,i,o,s,l,u,()=>l()]}class yt extends z{constructor(t){super(),V(this,t,_t,ft,K,{})}}new yt({target:document.getElementById("app")});
